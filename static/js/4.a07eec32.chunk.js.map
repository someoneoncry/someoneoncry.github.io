{"version":3,"sources":["mod/app/App.js","mock/mock.js","common/util/request.js"],"names":["IconText","_ref3","type","text","react_default","a","createElement","icon","style","marginRight","mock","topComments","hasMore","hotComments|10","user","locationInfo","liveInfo","userId","vipType","nickname","userType","vipRights","associator","musicPackage","vipCode","rights","redVipAnnualCount","expertTags","remarkName","authStatus","avatarUrl","Random","image","hex","cword","experts","beReplied","pendantData","showFloorComment","status","commentId","content","time","likedCount","startCount","expressionUrl","commentLocationType","parentCommentId","decoration","repliedMark","liked","total","code","App","_ref","_ref$id","id","_ref$type","_ref$limit","limit","_useState","useState","_useState2","Object","slicedToArray","list","setList","_useState3","_useState4","offset","setOffset","_useState5","_useState6","before","setBefore","_useState7","_useState8","loading","setLoading","_useState9","_useState10","setHasMore","useEffect","_ref2","asyncToGenerator","regenerator_default","mark","_callee","res","wrap","_context","prev","next","url","data","axios","post","then","console","log","sent","pre","concat","toConsumableArray","hotComments","stop","apply","this","arguments","fetchData","react_infinite_scroller_default","pageStart","initialLoad","loadMore","length","es_list","itemLayout","size","dataSource","renderItem","item","Item","key","actions","extra","width","alt","src","Meta","avatar","title","description"],"mappings":"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","file":"static/js/4.a07eec32.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { List, Icon, Avatar } from 'antd';\nimport { post } from '../../common/util/request';\n\nimport InfiniteScroll from 'react-infinite-scroller';\nimport './App.css';\nimport '../../mock/mock';\n\nfunction App({ id = 33337113, type = 0, limit = 10 }) {\n  const [list, setList] = useState([]);\n  const [offset, setOffset] = useState(0);\n  const [before, setBefore] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [hasMore, setHasMore] = useState(true);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      setLoading(true);\n      let res = await post('/comment/hot', {\n        id: id,\n        offset: offset,\n        before: before,\n        limit: limit,\n        type: type\n      });\n      setHasMore(res.hasMore);\n      setList(pre => [...pre, ...res.hotComments]);\n      setLoading(false);\n    };\n    fetchData();\n  }, [id, offset, limit, type, before]);\n\n  const loadMore = () => {\n    setOffset(list.length);\n    setBefore(list[list.length - 1].time);\n  };\n\n  return (\n    <InfiniteScroll\n      pageStart={0}\n      initialLoad={false}\n      loadMore={loadMore}\n      hasMore={!loading && hasMore}\n    >\n      <List\n        itemLayout=\"vertical\"\n        size=\"large\"\n        dataSource={list}\n        loading={loading}\n        renderItem={item => (\n          <List.Item\n            key={item.commentId}\n            actions={[\n              <IconText type=\"star-o\" text={item.startCount} />,\n              <IconText type=\"like-o\" text={item.likedCount} />\n            ]}\n            extra={<img width={272} alt=\"logo\" src={item.user.avatarUrl} />}\n          >\n            <List.Item.Meta\n              avatar={<Avatar src={item.user.avatarUrl} />}\n              title={item.user.nickname}\n              description={item.content}\n            />\n            {item.content}\n          </List.Item>\n        )}\n      />\n    </InfiniteScroll>\n  );\n}\n\n/**\n * 图标与文本\n * @param {*} param0\n */\nfunction IconText({ type, text }) {\n  return (\n    <span>\n      <Icon type={type} style={{ marginRight: 8 }} />\n      {text}\n    </span>\n  );\n}\n\nexport default App;\n","import {\n  // setup,\n  mock,\n  Random\n  // valid\n} from 'mockjs';\n\nmock('/comment/hot', {\n  topComments: [],\n  hasMore: true,\n  'hotComments|10': [\n    {\n      user: {\n        locationInfo: null,\n        liveInfo: null,\n        userId: 493560737,\n        vipType: 10,\n        nickname: '@cname',\n        userType: 0,\n        vipRights: {\n          associator: null,\n          musicPackage: {\n            vipCode: 220,\n            rights: true\n          },\n          redVipAnnualCount: -1\n        },\n        expertTags: null,\n        remarkName: null,\n        authStatus: 0,\n        avatarUrl: () => Random.image('200x200', Random.hex(), Random.cword()),\n        experts: null\n      },\n      beReplied: [],\n      pendantData: null,\n      showFloorComment: null,\n      status: 0,\n      commentId: 1316406400,\n      content: '@cparagraph',\n      time: 1543756574394,\n      likedCount: '@integer(100, 10000)',\n      startCount: '@integer(1000, 10000)',\n      expressionUrl: null,\n      commentLocationType: 0,\n      parentCommentId: 0,\n      decoration: null,\n      repliedMark: null,\n      liked: false\n    }\n  ],\n  total: 76,\n  code: 200\n});\n","import axios from 'axios';\n\n/**\n * 发送 get 请求\n * @param {*} url\n * @param {*} data\n */\nexport function get(url, data) {\n  return axios\n    .get(url, data)\n    .then(res => res.data)\n    .then(data => {\n      console.log(data);\n      return data;\n    });\n}\n\n/**\n * 发送 post 请求\n * @param {*} url\n * @param {*} data\n */\nexport function post(url, data) {\n  return axios\n    .post(url, data)\n    .then(res => res.data)\n    .then(data => {\n      console.log(data);\n      return data;\n    });\n}\n"],"sourceRoot":""}