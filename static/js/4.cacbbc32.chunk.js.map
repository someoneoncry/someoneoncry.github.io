{"version":3,"sources":["mod/app/App.js","mod/app/mock.js","common/util/request.js"],"names":["IconText","type","text","style","marginRight","mock","topComments","hasMore","user","locationInfo","liveInfo","userId","vipType","nickname","userType","vipRights","associator","musicPackage","vipCode","rights","redVipAnnualCount","expertTags","remarkName","authStatus","avatarUrl","experts","beReplied","pendantData","showFloorComment","status","commentId","content","time","likedCount","startCount","expressionUrl","commentLocationType","parentCommentId","decoration","repliedMark","liked","total","code","App","id","limit","useState","list","setList","offset","setOffset","before","setBefore","loading","setLoading","setHasMore","useEffect","a","url","data","axios","post","then","res","console","log","pre","hotComments","fetchData","pageStart","initialLoad","loadMore","length","itemLayout","size","dataSource","renderItem","item","Item","key","actions","extra","width","alt","src","Meta","avatar","title","description"],"mappings":"6SA6EA,SAASA,EAAT,GAAmC,IAAfC,EAAc,EAAdA,KAAMC,EAAQ,EAARA,KACxB,OACE,8BACE,uBAAMD,KAAMA,EAAME,MAAO,CAAEC,YAAa,KACvCF,GC1EPG,eAAK,eAAgB,CACnBC,YAAa,GACbC,SAAS,EACT,iBAAkB,CAChB,CACEC,KAAM,CACJC,aAAc,KACdC,SAAU,KACVC,OAAQ,UACRC,QAAS,GACTC,SAAU,SACVC,SAAU,EACVC,UAAW,CACTC,WAAY,KACZC,aAAc,CACZC,QAAS,IACTC,QAAQ,GAEVC,mBAAoB,GAEtBC,WAAY,KACZC,WAAY,KACZC,WAAY,EAEZC,UAAW,sDACXC,QAAS,MAEXC,UAAW,GACXC,YAAa,KACbC,iBAAkB,KAClBC,OAAQ,EACRC,UAAW,WACXC,QAAS,cACTC,KAAM,cACNC,WAAY,uBACZC,WAAY,wBACZC,cAAe,KACfC,oBAAqB,EACrBC,gBAAiB,EACjBC,WAAY,KACZC,YAAa,KACbC,OAAO,IAGXC,MAAO,GACPC,KAAM,MDkCOC,UA9Ef,YAAuD,IAAD,IAAvCC,UAAuC,MAAlC,SAAkC,MAAxB3C,YAAwB,MAAjB,EAAiB,MAAd4C,aAAc,MAAN,GAAM,IAC5BC,mBAAS,IADmB,mBAC7CC,EAD6C,KACvCC,EADuC,OAExBF,mBAAS,GAFe,mBAE7CG,EAF6C,KAErCC,EAFqC,OAGxBJ,mBAAS,MAHe,mBAG7CK,EAH6C,KAGrCC,EAHqC,OAItBN,oBAAS,GAJa,mBAI7CO,EAJ6C,KAIpCC,EAJoC,OAKtBR,oBAAS,GALa,mBAK7CvC,EAL6C,KAKpCgD,EALoC,KA6BpD,OAtBAC,qBAAU,YACO,uCAAG,4BAAAC,EAAA,6DAChBH,GAAW,GADK,SEMDI,EFJM,eEIDC,EFJiB,CACnCf,GAAIA,EACJK,OAAQA,EACRE,OAAQA,EACRN,MAAOA,EACP5C,KAAMA,GEAL2D,IACJC,KAAKH,EAAKC,GACVG,MAAK,SAAAC,GAAG,OAAIA,EAAIJ,QAChBG,MAAK,SAAAH,GAEJ,OADAK,QAAQC,IAAIN,GACLA,KFZS,OAEZI,EAFY,OAShBR,EAAWQ,EAAIxD,SACfyC,GAAQ,SAAAkB,GAAG,4BAAQA,GAAR,YAAgBH,EAAII,iBAC/Bb,GAAW,GAXK,iCEMf,IAAcI,EAAKC,IFNJ,OAAH,qDAafS,KACC,CAACxB,EAAIK,EAAQJ,EAAO5C,EAAMkD,IAQ3B,kBAAC,IAAD,CACEkB,UAAW,EACXC,aAAa,EACbC,SATa,WACfrB,EAAUH,EAAKyB,QACfpB,EAAUL,EAAKA,EAAKyB,OAAS,GAAGxC,OAQ9BzB,SAAU8C,GAAW9C,GAErB,uBACEkE,WAAW,WACXC,KAAK,QACLC,WAAY5B,EACZM,QAASA,EACTuB,WAAY,SAAAC,GAAI,OACd,sBAAMC,KAAN,CACEC,IAAKF,EAAK/C,UACVkD,QAAS,CACP,kBAAChF,EAAD,CAAUC,KAAK,SAASC,KAAM2E,EAAK3C,aACnC,kBAAClC,EAAD,CAAUC,KAAK,SAASC,KAAM2E,EAAK5C,cAErCgD,MAAO,yBAAKC,MAAO,IAAKC,IAAI,OAAOC,IAAKP,EAAKrE,KAAKgB,aAGlD,sBAAMsD,KAAKO,KAAX,CACEC,OAAQ,uBAAQF,IAAKP,EAAKrE,KAAKgB,YAC/B+D,MAAOV,EAAKrE,KAAKK,SACjB2E,YAAaX,EAAK9C,UAEnB8C,EAAK9C","file":"static/js/4.cacbbc32.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { List, Icon, Avatar } from 'antd';\nimport { post } from '../../common/util/request';\n\nimport InfiniteScroll from 'react-infinite-scroller';\nimport './App.css';\nimport './mock';\n\nfunction App({ id = 33337113, type = 0, limit = 10 }) {\n  const [list, setList] = useState([]);\n  const [offset, setOffset] = useState(0);\n  const [before, setBefore] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [hasMore, setHasMore] = useState(true);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      setLoading(true);\n      let res = await post('/comment/hot', {\n        id: id,\n        offset: offset,\n        before: before,\n        limit: limit,\n        type: type\n      });\n      setHasMore(res.hasMore);\n      setList(pre => [...pre, ...res.hotComments]);\n      setLoading(false);\n    };\n    fetchData();\n  }, [id, offset, limit, type, before]);\n\n  const loadMore = () => {\n    setOffset(list.length);\n    setBefore(list[list.length - 1].time);\n  };\n\n  return (\n    <InfiniteScroll\n      pageStart={0}\n      initialLoad={false}\n      loadMore={loadMore}\n      hasMore={!loading && hasMore}\n    >\n      <List\n        itemLayout=\"vertical\"\n        size=\"large\"\n        dataSource={list}\n        loading={loading} // 注释掉显示骨架屏\n        renderItem={item => (\n          <List.Item\n            key={item.commentId}\n            actions={[\n              <IconText type=\"star-o\" text={item.startCount} />,\n              <IconText type=\"like-o\" text={item.likedCount} />\n            ]}\n            extra={<img width={272} alt=\"logo\" src={item.user.avatarUrl} />}\n          >\n            {/* <Skeleton loading={loading} active avatar> */}\n            <List.Item.Meta\n              avatar={<Avatar src={item.user.avatarUrl} />}\n              title={item.user.nickname}\n              description={item.content}\n            />\n            {item.content}\n            {/* </Skeleton> */}\n          </List.Item>\n        )}\n      />\n    </InfiniteScroll>\n  );\n}\n\n/**\n * 图标与文本\n * @param {*} param0\n */\nfunction IconText({ type, text }) {\n  return (\n    <span>\n      <Icon type={type} style={{ marginRight: 8 }} />\n      {text}\n    </span>\n  );\n}\n\nexport default App;\n","import {\n  // setup,\n  mock\n  // Random\n  // valid\n} from 'mockjs';\n\nmock('/comment/hot', {\n  topComments: [],\n  hasMore: true,\n  'hotComments|10': [\n    {\n      user: {\n        locationInfo: null,\n        liveInfo: null,\n        userId: 493560737,\n        vipType: 10,\n        nickname: '@cname',\n        userType: 0,\n        vipRights: {\n          associator: null,\n          musicPackage: {\n            vipCode: 220,\n            rights: true\n          },\n          redVipAnnualCount: -1\n        },\n        expertTags: null,\n        remarkName: null,\n        authStatus: 0,\n        // avatarUrl: () => Random.image('200x200', Random.hex(), Random.cword()),\n        avatarUrl: 'https://placem.at/people?w=200&h=200&random=@string',\n        experts: null\n      },\n      beReplied: [],\n      pendantData: null,\n      showFloorComment: null,\n      status: 0,\n      commentId: 1316406400,\n      content: '@cparagraph',\n      time: 1543756574394,\n      likedCount: '@integer(100, 10000)',\n      startCount: '@integer(1000, 10000)',\n      expressionUrl: null,\n      commentLocationType: 0,\n      parentCommentId: 0,\n      decoration: null,\n      repliedMark: null,\n      liked: false\n    }\n  ],\n  total: 76,\n  code: 200\n});\n","import axios from 'axios';\n\n/**\n * 发送 get 请求\n * @param {*} url\n * @param {*} data\n */\nexport function get(url, data) {\n  return axios\n    .get(url, data)\n    .then(res => res.data)\n    .then(data => {\n      console.log(data);\n      return data;\n    });\n}\n\n/**\n * 发送 post 请求\n * @param {*} url\n * @param {*} data\n */\nexport function post(url, data) {\n  return axios\n    .post(url, data)\n    .then(res => res.data)\n    .then(data => {\n      console.log(data);\n      return data;\n    });\n}\n"],"sourceRoot":""}