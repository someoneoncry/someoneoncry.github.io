{"version":3,"sources":["mod/app/App.js","common/util/request.js"],"names":["IconText","_ref3","type","text","react_default","a","createElement","icon","style","marginRight","App","_ref","_ref$id","id","_ref$type","_ref$limit","limit","_useState","useState","_useState2","Object","slicedToArray","list","setList","_useState3","_useState4","offset","setOffset","_useState5","_useState6","before","setBefore","_useState7","_useState8","loading","setLoading","_useState9","_useState10","hasMore","setHasMore","useEffect","_ref2","asyncToGenerator","regenerator_default","mark","_callee","res","wrap","_context","prev","next","url","data","axios","post","then","console","log","sent","pre","concat","toConsumableArray","hotComments","stop","apply","this","arguments","fetchData","react_infinite_scroller_default","pageStart","initialLoad","loadMore","length","time","es_list","itemLayout","size","dataSource","renderItem","item","Item","key","commentId","actions","startCount","likedCount","extra","width","alt","src","user","avatarUrl","Meta","avatar","title","nickname","description","content"],"mappings":"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","file":"static/js/4.850387e8.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { List, Icon, Avatar } from 'antd';\nimport { post } from '../../common/util/request';\n\nimport InfiniteScroll from 'react-infinite-scroller';\nimport './App.css';\n// import '../../mock/mock';\n\nfunction App({ id = 33337113, type = 0, limit = 10 }) {\n  const [list, setList] = useState([]);\n  const [offset, setOffset] = useState(0);\n  const [before, setBefore] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [hasMore, setHasMore] = useState(true);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      setLoading(true);\n      let res = await post('/comment/hot', {\n        id: id,\n        offset: offset,\n        before: before,\n        limit: limit,\n        type: type\n      });\n      setHasMore(res.hasMore);\n      setList(pre => [...pre, ...res.hotComments]);\n      setLoading(false);\n    };\n    fetchData();\n  }, [id, offset, limit, type, before]);\n\n  const loadMore = () => {\n    setOffset(list.length);\n    setBefore(list[list.length - 1].time);\n  };\n\n  return (\n    <InfiniteScroll\n      pageStart={0}\n      initialLoad={false}\n      loadMore={loadMore}\n      hasMore={!loading && hasMore}\n    >\n      <List\n        itemLayout=\"vertical\"\n        size=\"large\"\n        dataSource={list}\n        loading={loading}\n        renderItem={item => (\n          <List.Item\n            key={item.commentId}\n            actions={[\n              <IconText type=\"star-o\" text={item.startCount} />,\n              <IconText type=\"like-o\" text={item.likedCount} />\n            ]}\n            extra={<img width={272} alt=\"logo\" src={item.user.avatarUrl} />}\n          >\n            <List.Item.Meta\n              avatar={<Avatar src={item.user.avatarUrl} />}\n              title={item.user.nickname}\n              description={item.content}\n            />\n            {item.content}\n          </List.Item>\n        )}\n      />\n    </InfiniteScroll>\n  );\n}\n\n/**\n * 图标与文本\n * @param {*} param0\n */\nfunction IconText({ type, text }) {\n  return (\n    <span>\n      <Icon type={type} style={{ marginRight: 8 }} />\n      {text}\n    </span>\n  );\n}\n\nexport default App;\n","import axios from 'axios';\n\n/**\n * 发送 get 请求\n * @param {*} url\n * @param {*} data\n */\nexport function get(url, data) {\n  return axios\n    .get(url, data)\n    .then(res => res.data)\n    .then(data => {\n      console.log(data);\n      return data;\n    });\n}\n\n/**\n * 发送 post 请求\n * @param {*} url\n * @param {*} data\n */\nexport function post(url, data) {\n  return axios\n    .post(url, data)\n    .then(res => res.data)\n    .then(data => {\n      console.log(data);\n      return data;\n    });\n}\n"],"sourceRoot":""}